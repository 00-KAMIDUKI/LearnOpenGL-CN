language: python

python:
  - 3.4

install:
  - pip install mkdocs
  - python setup.py install

script:
  - mkdocs build --clean

after_success: |
  if [ -n "$GITHUB_API_KEY" ]; then
    cd "$TRAVIS_BUILD_DIR"
    cd site
    git init
    git add .
    git -c user.name='travis' -c user.email='travis' commit -m "update"
    git push -f -q https://Meow-J:$GITHUB_API_KEY@github.com/LearnOpenGL-CN/learnopengl-cn.github.io master
    cd "$TRAVIS_BUILD_DIR"
  fi